<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Spectre</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
<style>
    body {
	margin: 0;
	background-color: rgb(255, 255, 255);
	color: #fff;
	font-family: Monospace;
	overscroll-behavior: none;
}
#container{
    height: 100%;
    width: 100%;
    overscroll-behavior: none;
    position: absolute;
    overflow:hidden;
}
</style>
</head>
<body>
    <div id="container"></div>
    <!-- <script type="module" src="./cube.js"></script> -->
    <script type="module">
        import * as Spectre from "./build/js/spectre.js";
        let container;
        let renderer;
        let scene;
        let mesh;
        let camera;
        async function init() {
            container = document.getElementById("container");
            renderer = new Spectre.WebGPURenderer({
                powerPreference: "high-performance",
                antialias: true,
            });
            await renderer.init();
            container.appendChild(renderer.domElement);

            scene = new Spectre.Scene();

            camera = new Spectre.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 10000);
            camera.position.z = 1000;
            camera.lookAt(new Spectre.Vector3(0, 0, 0));

            const controls = new Spectre.OrbitControls(camera, renderer.domElement);
            const material = new Spectre.MeshPhongMaterial();
            material.color = new Spectre.Color(1, 0, 0);
            const geometry = new Spectre.SphereGeometry(100);
            const mesh = new Spectre.Mesh(geometry, material);
            scene.add(mesh);
        }

        function frame() {
            renderer.render(scene, camera);
            render();
        }

        function render() {
            requestAnimationFrame(() => {
                frame();
            });
        }

        function resize() {
            renderer.setSize(container.clientWidth, container.clientHeight);
        }

        window.addEventListener("resize", function () {
            resize();
        });

        init().then(() => {
            render();
        });

    </script>
</body>
</html>